<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Frank's Redily</title><link rel=stylesheet href=/css/bulma.min.css><link rel=stylesheet href=/css/style.css></head><body class=terminal><section class=window><header class=window-header><div class="logo terminal-prompt"><a href=https://franknvc.github.io/ class=no-style>Frank's Redily</a>
<span style=color:blue>:~#</span>
<a href=https://franknvc.github.io/posts>posts</a><span style=color:#1a95e0>/</span>
<a href=https://franknvc.github.io/posts/algorithm>algorithm</a><span style=color:#1a95e0>/</span>
<a href=https://franknvc.github.io/posts/algorithm/2d-collision-detection>2d-collision-detection</a><span style=color:#1a95e0>/</span></div><div class=window-controls><span class="control-item control-minimize">‒</span>
<span class="control-item control-maximize">□</span>
<span class="control-item control-close">˟</span></div></header><main class=window-content id=content><div class=container><div class=window-cursor><span class=i-cursor-indicator>></span><div class=terminal-nav><nav class=terminal-menu><ul vocab="https://schema.org/" typeof="BreadcrumbList"><li><a href=/about typeof="ListItem">/about</a></li><li><a href=/posts typeof="ListItem">/posts</a></li><li><a href=/projects typeof="ListItem">/projects</a></li><li><a href=/gallery typeof="ListItem">/photos</a></li><li><a href=/resume typeof="ListItem">/resumé</a></li></ul></nav></div><span class=i-cursor-underscore></span></div><div class=scrollable><h1>[Algorithm] 2D Collision Detection</h1>Apr. 26, 2021<br><br><p>I have posted a series about simple game programming in Python call &lsquo;Fun&rsquo; on this blog. One of the common interactions between objects in games is the collision between objects. As such, all game engine or framework has a compilation of methods for detecting collision.</p><p>The basic idea is that despite the different geometry shapes of the objects, we can create a boundary that covers the entire object, called the <code>bounding box</code> or <code>hitbox</code> and check for collision conditions based on these boxes. Even though collion may not be pixel perfect, but this looks good and performant enough, especially when there are multiple entities. So you are trading between aesthetic and frame per second (fps) here.</p><p>Based on the number of dimension (2D vs. 3D) and how accurate the checking is, the algorithm can become pretty complex. As this is well-beyond my scope, I will only introduce the most basic collision detection algorithm that&rsquo;s used in simple 2D games.</p><h2 id=axis-aligned-bounding-box>Axis-Aligned Bounding Box</h2><p><img src=aabb.jpg alt=AABB></p><p>One of the simpler form of collision detection between 2 rectangles is the <code>Axis-Aligned Bounding Box</code> algorithm. It involes a set of conditions based on the alignment of the axis. If you don&rsquo;t understand, don&rsquo;t worry. I do not get it the first time as well. Let&rsquo;s take a look at the figure above.</p><p>The idea is that the <code>blue</code> area always formed when the two rectangles collide. And we are checking the requirements for the forming of <code>blue</code> area. The conditions is ultimately based on the axis (or side) of the two rectangles.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>black</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20</span>, <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>15</span> };
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>red</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>15</span>, <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>30</span>, <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20</span> };

<span style=color:#66d9ef>if</span> (
  <span style=color:#a6e22e>black</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>red</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>red</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>&amp;&amp;</span>
  <span style=color:#a6e22e>black</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>black</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>red</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&amp;&amp;</span>
  <span style=color:#a6e22e>black</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>red</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>red</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>&amp;&amp;</span>
  <span style=color:#a6e22e>black</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>black</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>red</span>.<span style=color:#a6e22e>y</span>
)
  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</code></pre></div><p>Drawing out the two rectangle accurately and try substituing the value of <code>[x, y, width, height]</code>. You will see that it returns <code>true</code>. We are checking that there&rsquo;s no gap between any of the 4 sides of the rectangles. And this will be true for all cases, for example, when you switch only the y coordinates of the rectangles, or in the case that one rectangle envelopes completely the other. Try drawing out differect cases on paper and go through the algorithm. This algorithm, like many others, comes from the mathematical field, and you can extend this for 3D checking by adding conditions for the <code>z-axis</code>.</p><p>[To be continued&mldr;]</p></div></div></main><footer class=bottom><small>Copyright 2021 Nguyen Viet Cuong</small></footer></section></body></html>